<div>
    <transition name="modal">
        <!-- start: 공통 팝업 / 파일명 : W.4.5.2.4 (알림 상세) -->
        <modal v-if="isOpen && isLoaded" size="600px" body-padding="0" @modalClose="popupChange(false)">
            <template v-if="postDetailModel!==undefined">
                <div slot="header">
                    <!-- header custom coding-->
                    <p class="popup-header-tit">{{ postDetailModel.title }}</p>
                    <ul class="feed-info clearfix">
                        <li>{{ postDetailModel.createdAt }}</li>
                        <li>{{ postDetailModel.count }}명 읽음</li>
                    </ul>

                    <div class="popup-btn">
                        <button type="button" class="btn only-ico-btn sm bookmark active"></button>

                        <div class="list-popup mgl-20">
                            <v-menu
                                    min-width="200px"
                                    :close-on-click="true">
                                <template v-slot:activator="{ on, attrs }">
                                    <button v-if="true"
                                            type="button"
                                            class="list-popup-btn"
                                            v-bind="attrs"
                                            v-on="on"><img :src="require('@/assets/images/more.svg')" alt="">
                                    </button>
                                </template>
                                <v-list>
                                    <v-list-item @click="">
                                        <v-list-item-title>일정 수정</v-list-item-title>
                                    </v-list-item>
                                    <v-list-item @click="">
                                        <v-list-item-title>공지로 등록</v-list-item-title>
                                    </v-list-item>
                                    <v-list-item @click="">
                                        <v-list-item-title>일정 보관</v-list-item-title>
                                    </v-list-item>
                                    <v-list-item @click="">
                                        <v-list-item-title>일정 삭제</v-list-item-title>
                                    </v-list-item>
                                </v-list>
                            </v-menu>
                        </div>
                    </div>
                </div>
                <div slot="body">
                    <!-- body custom coding-->
                    <div class="scroll-body" style="height:70vh;">
                        <div class="popup-form">
                            <div class="popup-form-top">
                                <div class="form-item post-classes selected"> <!-- class 선택 시 form-item에 selected 추가됨 -->
                                    <p>
                                        <span class="icon"><img :src="require('@/assets/images/bg-icon.png')" class="icon-img" alt=""></span>
                                        <span class="gr-name">{{ myClassHomeModel.g_name }}</span>
                                        <strong class="cls-name">{{ myClassHomeModel.name }}</strong>
                                    </p>

                                    <p class="post-writer">{{ ( postDetailModel)? postDetailModel.owner.nickname : '' }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="popup-feed-detail pdb-40">
                            <div class="fd-cnt">
                                <p class="fd-txt">{{ getDetailInfo }}</p>

                                <a href="" @click.prevent="openPhotoViewer">
                                    <!-- start: attach 에 이미지파일이 있는 경우 -->
                                    <list-in-img-preview :file-items="postDetailModel.attachment"
                                                         location="location"></list-in-img-preview>
                                    <!-- end: attach 에 이미지파일이 있는 경우 -->
                                </a>

                                <!-- start: attach 에 이미지 말고 다른 확장자를 가진 파일 즉 첨부파일인 경우 -->
                                <list-in-file-preview :file-items="postDetailModel.attachment" name="originalname" location="location"></list-in-file-preview>
                                <!-- end: attach 에 이미지 말고 다른 확장자를 가진 파일 즉 첨부파일인 경우 -->

                                <div class="fd-inner">
                                    <p class="fd-inner-txt fc-red">투표 중 <span class="vote-count"><span class="count-num">0</span>/233명 응답</span></p>

                                    <div class="vote-area">
                                        <div class="vote-top">
                                            <p class="vote-tit">수학여행 장소 투표</p>
                                            <ul class="vote-option clearfix">
                                                <li>복수선택</li>
                                                <li>익명투표</li>
                                                <li>2020.3.12 오후 3시 마감</li>
                                            </ul>
                                        </div>
                                        <div class="vote-checkbox">
                                            <div class="vote-select">
                                                <div class="btn-radio">
                                                    <input type="radio" name="email" id="radio1">
                                                    <label for="radio1">경주<br><span><em class="vote-current">0</em>명</span></label>
                                                </div>
                                            </div>

                                            <div class="vote-select">
                                                <div class="btn-radio">
                                                    <input type="radio" name="email" id="radio2">
                                                    <label for="radio2">제주도<br><span><em class="vote-current">0</em>명</span></label>
                                                </div>
                                                <div class="vote-img">
                                                    <img :src="require('@/assets/images/pic.png')" class="thumb" alt="">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="fd-inner">
                                    <p class="fd-inner-txt">미술대회 관련 링크 1</p>

                                    <div class="link-area">
                                        <div class="link-thumb"><img :src="require('@/assets/images/pic4.png')" alt=""></div>
                                        <div class="link-cnt">
                                            <p class="link-tit">2019학년도 초등미술경시대회 일정 및 안내</p>
                                            <p class="link-txt">자연사랑 어린이 미술대회는 지난 2016년부터 개최해 온 전통 있는 미술대회 입니다. 아이들에게 환경보호…</p>
                                            <p class="link-source"><img :src="require('@/assets/images/pic9.png')" class="link-logo" alt="">https://m.blog.naver.com/ccedulab/221457750462214577504622145775046</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="fd-inner">
                                    <p class="fd-inner-txt">첨부 파일 3</p>

                                    <ul class="file-list clearfix">
                                        <li><a href="">6학년 2학기 수학 II 3단원 .pdf</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="popup-feed-comment">
                            <div class="comment-top">
                                <p>댓글 {{ commentItemsModel.length }}</p>
                            </div>
                            <div class="comment-cnt" >
                                <div v-for="(item, idx ) in commentItemsModel" class="comment pdt-0" :key="`comment-${idx}`">
                                    <div class="main-comment">
                                        <p class="comment-writer">{{ item.owner.nickname }} <span class="wr-time">{{ updatedDiffDate(item.createdAt) }}</span></p>
                                        <p class="comment-txt">{{ item.comment }}</p>

                                        <div class="reply-state">
                                            <a href="" class="txt-btn">답글 {{ replyItems.length }}</a>
                                            <a href="" class="txt-btn">답글달기</a>
                                        </div>
                                    </div>

                                    <div v-for="( replyItem, jdx) in replyItemsModel[idx].comment_list" class="reply" :key="`reply-${jdx}`">
                                        <p class="comment-writer">{{ replyItem.owner.nickname }} <span class="wr-time">{{ updatedDiffDate(replyItem.createdAt) }}</span></p>
                                        <p class="comment-txt">{{ replyItem.comment }}</p>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                    <div slot="footer">
                        <div class="comment-btm">
                            <button type="button" class="btn only-ico-btn"><img :src="require('@/assets/images/image.svg')" alt=""></button>
                            <input type="text" class="form-control popup-type sm" placeholder="댓글을 작성해 주세요." style="width:466px;">
                            <a href="" class="txt-btn disabled">등록</a>
                        </div>
                    </div>
                </div>
            </template>

        </modal>
        <!-- end: 공통 팝업 -->

    </transition>

    <photo-viewer v-if="isPhotoViewer" :is-photo-viewer="isPhotoViewer" :img-data="getImgFileDataSort(postDetailData.attachment)" @change="onPhotoViewerStatus"></photo-viewer>
</div>
